<!DOCTYPE html>
<html>
<head>
  <title>
    Classic Snake
  </title>
  <style>
#Stats {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 30%;
}

#Stats td, #Stats th {
  border: 1px solid #ddd;
  padding: 8px;
}


#Stats tr:nth-child(even){background-color: #f2f2f2;}

#Stats th {
  padding-top: 15px;
  padding-bottom: 15px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}
</style>
  <meta charset="UTF-8">
</head>
<body><!-- Stats table below -->
	<div id="myTable">
		<table id="Stats" align="right" style="padding-right: 100px; margin-right: 2%">
  <tr>
    <th>Company</th>
    <th>Contact</th>
    <th>Country</th>
  </tr>
  <tr>
    <td>Alfreds Futterkiste</td>
    <td>Maria Anders</td>
    <td>Germany</td>
  </tr>
  <tr>
    <td>Berglunds snabbk√∂p</td>
    <td>Christina Berglund</td>
    <td>Sweden</td>
  </tr>
</table>
	</div>
	



	<section id="GameStats">
			<p id="Score" style="font-family: Comic Sans MS;font-size:22px;font-weight: 550">Score</p>
	</section>
  <canvas height="210" width="210" id="ctx" style="border: 4px solid Brown;">
  </canvas>
  <script type="text/javascript">
    var ctx = document.getElementById('ctx').getContext('2d');
        var CanHeight=210;
        var CanWidth=210;
        var bG=document.querySelector("#ctx")//background
        bG.style.background="url('https://images.unsplash.com/photo-1483354483454-4cd359948304?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80')";
        bG.style.backgroundSize="210px 210px";
        function getRandomInt(max) {
        	return Math.floor(Math.random() * Math.floor(max));
        }
        var direction;
        var moving;
        var eaten;
        var score;
        let SnakeArr=[{x:130,y:5},{x:120,y:5},{x:110,y:5},{x:100,y:5},{x:90,y:5},{x:80,y:5},{x:70,y:5},{x:60,y:5},{x:50,y:5}];
        var SnakeArrLastIndex=8;
        var SnakeArrLastInX;
        var SnakeArrLastInY;
        var SnakeArrAfterL=9;
        var up=1;down=3;left=0,right=2;//to change direction within snippet

        //Variables between this and below are for food region
        var minX=0;maxX=0;minY=0;maxY=0;//
        var max=CanWidth-15;
        var RegionWid;
        var minWH=15;
        minX=getRandomInt((CanWidth-15 - minX));//set minX 4 just in case random no is 0
        var preMaxX=getRandomInt((CanWidth-15 - 0));
        var preMaxY=getRandomInt((CanWidth-15 - 0));
        //Variables between this and above are for food region
        if(preMaxX<minX){
        	console.log("inside if "+preMaxX+"<"+minX);
        	if((minX-preMaxX)<minWH){
        		console.log("inside second if");
        		minX+=minWH;
        	}
        	maxX=minX;
        	minX=preMaxX;
        }
        else if(preMaxX>minX){
        	console.log("inside if "+preMaxX+">"+minX);
        	if((preMaxX-minX)<minWH){
        		console.log("inside second if");
        		preMaxX+=minWH;

        	}
        	maxX=preMaxX;
        	
        }
        else{//if equal
        	console.log("inside if "+preMaxX+"="+minX);
        	maxX=minX+minWH;
        }

        RegionWid=maxX-minX;
        minY=getRandomInt((CanWidth-15 - minY));//set minX 4 just in case random no is 0
        if(preMaxY<minY){
        	console.log("inside if "+preMaxY+"<"+minY);
        	if((minY-preMaxY)<minWH){
        		console.log("inside second if");
        		minY+=minWH;
        	}
        	maxY=minY;
        	minY=preMaxY;
        }
        else if(preMaxY>minY){
        	console.log("inside if "+preMaxY+">"+minY);
        	if((preMaxY-minY)<minWH){
        		console.log("inside second if");
        		preMaxY+=minWH;

        	}
        	maxY=preMaxY;
        	
        }
        else{//if equal
        	console.log("inside if "+preMaxY+"="+minY);
        	maxY=minY+minWH;
        }

        //maxX=Math.random() * (CanWidth-15 - minX) + minX;//use minX to set maxX
        //Math.random()*(CanWidth-15)+5;
        //minY=Math.random() * (CanWidth-15 - minY) + 4;//set minX 4 just in case random no is 0
        //maxY=Math.random() * (CanWidth-15 - minY) + minY;//use minX to set maxX
        snakeSeg={//will draw these segments for each cell in array(snake body will be composed of these segments)
          //array will contain coordinatees for each cell
          color:"sienna",
          width:13,
          height:13
        };
        let HeadCoord=[{x:130,y:5}]
        /*
    AXIS OF CANVAS
    X AXIX --->>> increases from 0
    
    Y AXIS  ^
    Inccreases From
           |
          \|/
           +
      */
        drawSnake = function (x,y,counter){ ;
          ctx.save();
        if (counter==0) {
          ctx.fillStyle='black';
          ctx.fillRect(x,y,snakeSeg.width,snakeSeg.height);
          ctx.restore();
          }
          else{
          ctx.fillStyle=snakeSeg.color;
          ctx.fillRect(x,y,snakeSeg.width,snakeSeg.height);
          ctx.restore();
          }
      };
      drawFRegion=function(minX,maxY,maxX,minY){
      	ctx.save();
      	ctx.beginPath();
      	ctx.lineWidth = "1";
      	ctx.strokeStyle = "blue";
      	ctx.rect(minX, minY, RegionWid, (maxY-minY));
      	ctx.stroke();
      	ctx.restore();
      }
      //drawSnake(100,100,0);
      snakeFood={
        color:"CadetBlue",
        width:15,
        height:15
      };
      drawFood=function(sf,counter) {
        ctx.save();
        if (counter==0) {
          ctx.fillStyle=snakeFood.color;
          ctx.beginPath();
          ctx.arc(sf.x, sf.y, (snakeFood.width*0.3), 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
          ctx.restore();
        }
        // body...
      }
      function addSeg(x,y){
        SnakeArr.push({x,y});
      }
      drawScore=function(scoreG){
        ctx.save();
        ctx.font = "10px Comic Sans MS";
        ctx.fillStyle = "black";
        ctx.fillText("Score:"+scoreG, 0, 30);
        ctx.restore();
        ctx.save();
        ctx.font = "15px Comic Sans MS";
        ctx.fillStyle = "black";
        ctx.fillText("Coord:x:"+HeadCoord[0].x+" y:"+HeadCoord[0].y, 85, 30);
        ctx.restore();
      }
      oneStep=function(){
for (var i = SnakeArr.length-1; i >= 0; i--) {//bug for loop had to be backwards cuz otherwise
  //all end up on one spot 
  if(direction==0){//if left pressed
  if(SnakeArr[0].x>0){


  if (i==0) {
    SnakeArr[0].x=SnakeArr[0].x-5;
  } 
  else{
    SnakeArr[i].x=SnakeArr[i-1].x;//of previous segment
    SnakeArr[i].y=SnakeArr[i-1].y;
  }
  }

  }
    else if (direction == 1) {
          //if pressed up
          if (SnakeArr[0].y>0) {
          if(i==0){
              SnakeArr[i].y=SnakeArr[i].y-5;
            }
            else{
            SnakeArr[i].x=SnakeArr[i-1].x;
            SnakeArr[i].y=SnakeArr[i-1].y;
            }
          }
        }
          else if (direction == 2) {//if right pressed
          if ((SnakeArr[0].x<(CanHeight-10))){//10 less then max canvas width or height
          if(i==0){
              SnakeArr[i].x=SnakeArr[i].x+5;
            }
            else{
            SnakeArr[i].x=SnakeArr[i-1].x;
            SnakeArr[i].y=SnakeArr[i-1].y;
            }
          }
        }
          else if (direction == 3) {//if down pressed
          if ((SnakeArr[0].y<(CanHeight-10))){//10 less then max canvas height
          if(i==0){
              SnakeArr[i].y=SnakeArr[i].y+5;
            }
            else{
            SnakeArr[i].x=SnakeArr[i-1].x;
            SnakeArr[i].y=SnakeArr[i-1].y;
            }
          }
          } 
}
}
mainFunct=function () {//will get called every x millisecond
  ctx.clearRect(0,0,CanHeight,CanWidth);
  drawFRegion(minX,maxY,maxX,minY);
  for (var i = 0; i < SnakeArr.length; i++) {
    drawSnake((SnakeArr[i].x),(SnakeArr[i].y),(i));
  }
  HeadCoord[0].x=SnakeArr[0].x;
  HeadCoord[0].y=SnakeArr[0].y;
  document.getElementById("Score").innerHTML=("Score: "+(score));
  drawScore(score);
  while(eaten){//to select new coordinate if ffod was eaten
          //foodX=(Math.random()*(CanWidth-15))+5;//15 less then canvaswidth
          //foodY=(Math.random()*(CanWidth-15))+5;
          foodX=Math.random() * (maxX - minX) + minX;//food will appear within region
          foodY=Math.random() * (maxY - minY) + minY;
          foodList[0].x=foodX;
          foodList[0].y=foodY;
          eaten=false;
        }
  foodList.forEach(drawFood);
  oneStep();
  one=SnakeArr[0].x-foodList[0].x;
  two=foodList[0].x-SnakeArr[0].x;
  three=SnakeArr[0].y-foodList[0].y;
  four=foodList[0].y-SnakeArr[0].y;
  if(((one<12&&one>0)||(two<12&&two>0))&&(((three)<12&&three>0)||(four<12&&four>0))){
  	eaten=true;
    score=score+1;
    if (eaten) {
    	SnakeArrLastIndex++;
        SnakeArrAfterL++;
        console.log("length increased");
        }
        }
        moving=true;
  // body...
}
      startGame=function () {//initialise snake body and food
        snakeBody=SnakeArr=[{x:130,y:5},{x:120,y:5},{x:110,y:5},{x:100,y:5},{x:90,y:5},{x:80,y:5},{x:70,y:5},{x:60,y:5},{x:50,y:5}];
        score=0;
        eaten=false;
        foodX=Math.random() * (maxX - minX) + minX;//food will appear within region
        foodY=Math.random() * (maxY - minY) + minY;
        foodList=[{x:foodX,y:foodY}];
        for (var i = 0; i < SnakeArr.length; i++) {
        drawSnake((SnakeArr[i].x),(SnakeArr[i].y),(i));
      }
      myInter=setInterval(mainFunct,50);
    }
    startGame();
    document.onkeydown=function(event){//set direction
  if(event.keyCode==37){
    direction=0;
    console.log("pressed left");
  }
  else if(event.keyCode==38){
    direction=1;
    console.log("pressed up");
  }
  else if(event.keyCode==39){
    direction=2;
    console.log("pressed right");
  }
  else if(event.keyCode==40){
    direction=3;
    console.log("pressed down");
  }
  else if ((event.keyCode==32)&&(moving==true)) {//created this to stop game
          console.log("spacebar");
          clearInterval(myInter);
          moving=false;
          
        }
        else if ((event.keyCode==32)&&(moving==false)) {//created this to start game
          console.log("spacebar to start");
          myInter=setInterval(mainFunct,40);
          moving=true;
        }

}

      
  </script>

</body>
</html>
